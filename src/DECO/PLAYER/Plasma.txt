ACTOR PlasmaCannon : PlasmaRifle replaces PlasmaRifle
{
	Weapon.BobStyle Alpha
	Weapon.BobSpeed 2.5
	Weapon.BobRangeX 0.2
	Weapon.BobRangeY 0.5
	Weapon.UpSound "weapons/plzdown"
	scale 0.8
   	States
   	{
	Spawn:
		PZDP A -1
		Stop
   Deselect: 
      TNT1 A 0 A_StopSound(7)
      TNT1 AAAAAAAAAAAAAAAA 0 A_Lower
      TNT1 AAAAAAA 1 A_Lower
      Loop
	Select:
		PZDG A 1 Offset(67, 100)
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		PZDG A 1 Offset(54, 81)
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		PZDG a 1 Offset(32, 69)
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		PZDG a 1 Offset(22, 58)
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		PZDG a 1 Offset(16, 53)
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		PZDG a 1 Offset(10, 47)
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		PZDG a 1 Offset(7, 39)
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		PZDG a 1 Offset(4, 36)
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		PZDG a 1 Offset(2, 34)
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		PZDG a 1 Offset(0, 32)
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		Goto Ready
	Ready:
		TNT1 A 0 A_JumpifInventory("hotToken",9,"ReadyHot2")
		TNT1 A 0 A_JumpifInventory("hotToken",4,"ReadyHot1")
		PZDG a 9 A_WeaponReady
		TNT1 A 0 A_takeinventory("hotToken",2)
		PZDG b 9 A_WeaponReady
		TNT1 A 0 A_takeinventory("hotToken",2)
		PZDG c 9 A_WeaponReady
		TNT1 A 0 A_takeinventory("hotToken",2)
		Loop
	ReadyHot1:
		PZDG d 3 A_WeaponReady
		TNT1 A 0 A_takeinventory("hotToken",1)
		goto Ready
	ReadyHot2:
		PZDG e 3 A_WeaponReady
		TNT1 A 0 A_takeinventory("hotToken",2)
		goto Ready
	Fire:
		TNT1 A 0 A_Giveinventory("hotToken",1)
		PZDG a 0 A_Gunflash
		TNT1 A 0 A_JumpifInventory("hotToken",16,"FireHot3")
		TNT1 A 0 A_JumpifInventory("hotToken",9,"FireHot2")
		TNT1 A 0 A_JumpifInventory("hotToken",4,"FireHot1")
		PZDG A 1 Offset(0,34)
		PZDG A 1 Offset(0,33)
		PZDG A 1 Offset(0,32)
		PZDG A 1 Offset(0,32)
		PZDG A 1 Offset(0,32)
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_Refire

		goto Ready
	FireHot1:
		PZDG D 1 Offset(0,35)
		PZDG D 1 Offset(0,34)
		PZDG D 1 Offset(0,33)
		PZDG D 1 Offset(0,32)
		TNT1 A 0 A_Refire
		goto Ready
	FireHot2:
		PZDG E 1 Offset(0,36)
		PZDG E 1 Offset(0,35)
		PZDG E 1 Offset(0,34)
		PZDG E 1 Offset(0,33)
		TNT1 A 0 A_Refire
		goto Ready
	FireHot3:
		PZDG F 1 Offset(0,37)
		PZDG F 1 Offset(0,36)
		PZDG F 1 Offset(0,35)
		TNT1 A 0 A_Refire
		goto Hot
	Hot:
		TNT1 A 0 A_Playsound("weapons/plzhot",6,2)
		TNT1 A 0 A_TakeInventory("hotToken",16)
		PZDD A 2 Offset(-1,33)
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		PZDD B 2 Offset(0,32)
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		PZDD C 2
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		PZDD D 1
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		PZDD E 4 Offset(0,32)
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		PZDD E 3 Offset(-1,31)
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		PZDD E 6 Offset(-1,31)
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		PZDD E 6 Offset(-1,31)
		TNT1 A 0 A_Playsound("weapons/plzclick",7,2)
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		PZDD E 3 Offset(0,32)
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		PZDD D 2
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		PZDD C 1
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		PZDD B 2
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		PZDD A 2 Offset(-3,34)
		PZDG A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		PZDD A 2 Offset(-2,33) A_WeaponReady
		PZDG A 3 Offset(-1,32) A_WeaponReady
		PZDG B 4 Offset(0,32) A_WeaponReady
		Goto Ready	
	Flash:
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_PlaySound("weapons/plzfire", CHAN_WEAPON, 0.90, 0, 0.7)
		TNT1 A 0 A_ZoomFactor(0.997,ZOOM_INSTANT|ZOOM_NOSCALETURNING)
		PZDM A 1 Bright
		TNT1 A 0 a_firecustommissile ("hydrabullet",0,1,0,0,0,0)
		TNT1 A 0 A_ZoomFactor(1,ZOOM_NOSCALETURNING)
		PZDM B 1 Bright
      	Goto LightDone

	}
}

actor hotToken: Inventory 
{
	Inventory.maxamount 16
}



actor hydrabullet : fastprojectile
{
	+notimefreeze
	projectile
	+THRUSPECIES
	species "friendly"
	missiletype "hydratrail"
	missileheight 8
	+FORCEXYBILLBOARD
	+Bloodsplatter
	+LOOKALLAROUND
	+bright
	height 8
	radius 1
	speed 90
	damage 7
	scale 0.5
	decal doomimpscorch
	DeathSound "weapons/plasmax"
	states
	{
	spawn:
		// BLPL abcd 2 bright
		HRBL A 1 // A_SpawnItemEx("hydratrail")
		loop
	death:
		TNT1 A 0 A_SetScale(0.5)
		PLSE ABCDE 4 Bright
		stop
	}
}

actor hydratrail
{
	+NOINTERACTION
	+clientsideonly
	Radius 1
	Height 5
	Renderstyle add
	scale 0.50
	Alpha 0.85
	States
	{
	Spawn:
		TNT1 A 0
		HRBL A 1 Bright a_fadeout (0.50)
		wait
	}
}